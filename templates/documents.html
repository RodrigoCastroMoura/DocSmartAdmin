[Previous content with updated loadDocumentTypes function]
async function loadDocumentTypes() {
    const typeSelect = document.getElementById('documentType');
    typeSelect.innerHTML = '<option value="">Loading document types...</option>';
    typeSelect.disabled = true;

    try {
        const response = await fetch('/api/document_types');
        if (!response.ok) throw new Error('Failed to load document types');
        const data = await response.json();
        
        const types = data.document_types || [];
        typeSelect.innerHTML = `
            <option value="">Select Document Type</option>
            ${types.map(type => 
                `<option value="${type.id}">${type.name}</option>`
            ).join('')}`;
    } catch (error) {
        console.error('Error loading document types:', error);
        typeSelect.innerHTML = '<option value="">Error loading document types</option>';
    } finally {
        typeSelect.disabled = false;
    }
}
[Rest of the file content]
