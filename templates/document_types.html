[Previous code remains unchanged until line 232...]

async function createDocumentType(event) {
    event.preventDefault();
    const form = event.target;
    const submitButton = form.querySelector('button[type="submit"]');
    
    if (!validateForm(form)) {
        return;
    }
    
    const formData = new FormData(form);
    const departmentId = document.getElementById('documentTypeDepartment').value;
    const data = {
        name: formData.get('name'),
        description: formData.get('description'),
        category_id: formData.get('category_id')
    };
    showLoading(submitButton);

    try {
        const response = await fetch('/api/document_types', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(data)
        });

        if (!response.ok) {
            const errorData = await response.json();
            throw new Error(errorData.error || 'Failed to create document type');
        }

        hideModal('addDocumentTypeModal');
        form.reset();
        await loadDocumentTypes();
        showErrorMessage('Document type created successfully', 'success');
    } catch (error) {
        console.error('Error creating document type:', error);
        showErrorMessage(error.message);
    } finally {
        hideLoading(submitButton);
    }
}

[Rest of the code remains unchanged...]
