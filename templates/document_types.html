[Previous HTML content remains the same until line 231...]

async function createDocumentType(event) {
    event.preventDefault();
    const form = event.target;
    const submitButton = form.querySelector('button[type="submit"]');
    
    if (!validateForm(form)) {
        return;
    }
    
    const formData = new FormData(form);
    const data = Object.fromEntries(formData);
    showLoading(submitButton);

    try {
        const response = await fetch('/api/document_types', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({
                name: data.name,
                description: data.description || '',
                category_id: data.category_id,
                company_id: '{{ session.get("company_id", "") }}'
            })
        });

        if (!response.ok) {
            const errorData = await response.json();
            throw new Error(errorData.error || 'Failed to create document type');
        }

        hideModal('addDocumentTypeModal');
        form.reset();
        await loadDocumentTypes();
        showErrorMessage('Document type created successfully', 'success');
    } catch (error) {
        console.error('Error creating document type:', error);
        showErrorMessage(error.message);
    } finally {
        hideLoading(submitButton);
    }
}

[Rest of the file remains the same...]
